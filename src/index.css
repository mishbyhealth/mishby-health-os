/* src/index.css */

/* ── Tailwind layers (keep first) ─────────────────────────── */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Design tokens (safe defaults if no theme is set) ─────── */
:root{
  /* Surfaces & text */
  --bg:#F6F2E9;
  --header:#F7F2EA;
  --text:#111827;
  --muted:#6B7280;
  --border:#E5E7EB;
  --card-1:#FFFFFF;
  --card-2:#FBFBFB;

  /* Primary accent (mapped to gw-* for helpers) */
  --primary:#5A4B6E;          /* calm mauve */
  --primary-600:#4E415F;
  --primary-700:#443A54;

  --gw-primary:var(--primary);
  --gw-primary-600:var(--primary-600);
  --gw-primary-700:var(--primary-700);

  /* Shape & depth */
  --radius-lg:20px;
  --shadow-1:0 6px 24px rgba(0,0,0,.06);
  --shadow-2:0 12px 40px rgba(0,0,0,.08);

  /* Layout clamp */
  --gw-content-max:1040px;
}

/* ── Base (global) ────────────────────────────────────────── */
@layer base {
  html, body, #root { min-height:100%; min-height:100vh; background:var(--bg); color:var(--text); }
  h1,h2,h3,h4 { letter-spacing:-0.01em; }
  a { text-underline-offset:2px; }
  table { border-collapse:collapse; }
  th, td { border-color:var(--border); }
}

/* ── Components (helpers) ─────────────────────────────────── */
@layer components {
  .gw-card { @apply rounded-lg border p-4; background:var(--card-1); border-color:var(--border); box-shadow:var(--shadow-1); }
  .gw-btn  { @apply rounded border px-3 py-1 text-sm hover:bg-gray-50; border-color:var(--border); }

  .gw-btn-primary { background:var(--gw-primary); color:#fff !important; border:1px solid transparent; }
  .gw-btn-primary:hover { background:var(--gw-primary-600); }
  .gw-btn-primary:active { background:var(--gw-primary-700); }

  .gw-link-active { color:var(--gw-primary); @apply font-medium; }

  /* SideNav item helpers */
  .side-item{ background:#fff; }
  .side-item:hover{ background:rgba(0,0,0,0.04); }
  .side-item-active{ background:var(--gw-primary); color:#fff !important; }

  /* Page helpers used across forms */
  .gw-page{ width:min(100%, var(--gw-content-max)); margin-inline:auto; padding:12px; box-sizing:border-box; }
  .gw-tint{ background:var(--card-2); border:1px solid var(--border); border-radius:var(--radius-lg); box-shadow:var(--shadow-1); padding:12px; }
  .gw-row{ display:flex; flex-wrap:wrap; gap:.5rem; }
  .gw-badge{ display:inline-flex; align-items:center; border-radius:9999px; padding:.25rem .6rem; font-size:.875rem; line-height:1;
             background:var(--card-2); color:var(--text); border:1px solid var(--border); margin-right:.5rem; margin-bottom:.5rem; }
  .gw-badge.is-active{ background:var(--header); font-weight:600; }
  .gw-label > span{ display:block; margin-bottom:.25rem; color:var(--muted); }
  .gw-input{ width:100%; background:var(--card-1); border:1px solid var(--border); color:var(--text); border-radius:10px; padding:8px 10px; }
  .gw-input::placeholder{ opacity:.6; }
}

/* ── Utilities ────────────────────────────────────────────── */
@layer utilities { .gw-muted{ color:var(--muted); } }

/* ── Print tidy A4 ───────────────────────────────────────── */
@media print{
  @page { size:A4; margin:12mm; }
  body { background:#fff !important; color:#111 !important; }
  header, footer, nav { display:none !important; }
  .no-print { display:none !important; }
}

/* ── App shell & layout ──────────────────────────────────── */
.app-shell{ display:flex; min-height:100vh; background:var(--bg); color:var(--text); }
.app-main{ flex:1 1 auto; min-width:0; display:flex; flex-direction:column; }

.sidenav{
  width:240px; flex:0 0 240px; position:sticky; top:0; height:100vh;
  border-right:1px solid var(--border); background:var(--header);
}
.sidenav-inner{ display:flex; flex-direction:column; height:100%; }
.sidenav-brand{ display:flex; align-items:center; gap:10px; padding:16px; border-bottom:1px solid var(--border); }
.sidenav-nav{ display:flex; flex-direction:column; gap:8px; padding:12px; }
.side-chip{ display:flex; align-items:center; padding:10px 12px; border-radius:10px;
            background:var(--card-1); border:1px solid var(--border); color:var(--text); }
.side-chip.is-active{ border-color:var(--gw-primary); box-shadow:0 0 0 2px color-mix(in hsl, var(--gw-primary) 22%, transparent); }
.sidenav-controls{ margin-top:auto; padding:12px; border-top:1px solid var(--border); }

/* Brand mark */
.brand-mark{ width:18px; height:18px; border-radius:6px; background:var(--gw-primary); box-shadow:0 0 0 2px #fff3 inset, var(--shadow-1); }
.brand-text{ font-weight:700; }

/* Top bar & footer */
.topbar{ position:sticky; top:0; z-index:40; background:var(--header); border-bottom:1px solid var(--border); }
.topbar-inner{ display:flex; align-items:center; justify-content:space-between; min-height:60px; gap:12px; }
.footer{ margin-top:24px; padding:16px 0; border-top:1px solid var(--border); color:var(--muted); font-size:12px; }

/* Lock banner */
.gw-lock-banner{ position:fixed; left:16px; bottom:16px; padding:10px 12px; border:1px dashed var(--border); border-radius:10px;
                 background:var(--card-1); color:var(--text); box-shadow:var(--shadow-1); opacity:0; transform:translateY(8px);
                 pointer-events:none; transition:.2s ease; }
html[data-locked="1"] .gw-lock-banner{ opacity:1; transform:translateY(0); pointer-events:auto; }

/* Clamp & overflow guard */
html, body, #root{ width:100%; max-width:100%; overflow-x:hidden; box-sizing:border-box; }
main, [role="main"]{ width:min(100%, var(--gw-content-max)); margin-inline:auto; padding-inline:12px; box-sizing:border-box; }

/* Mobile tweaks */
@media (max-width:768px){
  .app-shell{ display:block; }
  .sidenav{ position:static; width:100%; height:auto; border-right:0; border-bottom:1px solid var(--border); }
  .sidenav-inner{ height:auto; }
  .sidenav-brand{ padding:12px 16px; }
  .sidenav-nav{ display:flex; gap:8px; padding:8px 12px 12px; overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch; scrollbar-width:thin; }
  .side-chip{ flex:0 0 auto; }
  .gw-page{ padding:12px; }
  .gw-card{ padding:12px; }
  .topbar-inner{ min-height:52px; }
  .gw-row > div{ width:100% !important; min-width:0 !important; }
  .gw-badge{ margin-right:.4rem; margin-bottom:.4rem; }
}

/* ───────────────────────────────────────────────────────────
   THEME PALETTES (7 improved sets)
   Keys unchanged: classic, mint, sky, lavender, sunset, forest, slate
   Each provides calm backgrounds + accessible accents.
   ────────────────────────────────────────────────────────── */

/* 1) classic — Sandstone & Teal (calm, premium) */
html[data-theme="classic"]{
  --bg:#F7F2E9; --header:#F4EFE6; --text:#14212B; --muted:#667085; --border:#E7E2D9;
  --card-1:#FFFFFF; --card-2:#FBF9F4;
  --primary:#0B7A5A; --primary-600:#096B50; --primary-700:#075B45;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 2) mint — Sage Meadow (soft green, not neon) */
html[data-theme="mint"]{
  --bg:#F2F7F3; --header:#ECF3EE; --text:#10241B; --muted:#5F6E63; --border:#DDE7E0;
  --card-1:#FFFFFF; --card-2:#F7FBF8;
  --primary:#4C956C; --primary-600:#3F825E; --primary-700:#356E50;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 3) sky — Breeze (cool, trustworthy blue) */
html[data-theme="sky"]{
  --bg:#EFF6FF; --header:#EAF2FF; --text:#0E1B2A; --muted:#5A6B7B; --border:#DBE7FF;
  --card-1:#FFFFFF; --card-2:#F8FBFF;
  --primary:#3F8CFF; --primary-600:#2F79E6; --primary-700:#2566C8;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 4) lavender — Mist (calm mauve you asked for) */
html[data-theme="lavender"]{
  --bg:#F5F2FA; --header:#F1ECF7; --text:#1A1721; --muted:#6A6474; --border:#E4DFF0;
  --card-1:#FFFFFF; --card-2:#F9F7FC;
  --primary:#5A4B6E; --primary-600:#4E415F; --primary-700:#443A54;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 5) sunset — Coral Peach (warm, friendly; not too loud) */
html[data-theme="sunset"]{
  --bg:#FFF5EF; --header:#FFEFE6; --text:#2A1712; --muted:#756463; --border:#FFE2D5;
  --card-1:#FFFFFF; --card-2:#FFF9F6;
  --primary:#E96D5B; --primary-600:#D85C4A; --primary-700:#C14D3E;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 6) forest — Evergreen (deep natural, balanced) */
html[data-theme="forest"]{
  --bg:#EEF6F0; --header:#E9F1EB; --text:#0C1A13; --muted:#4F6357; --border:#D7E6DC;
  --card-1:#FFFFFF; --card-2:#F6FBF8;
  --primary:#2F6E4E; --primary-600:#285D43; --primary-700:#204E39;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* 7) slate — Soft Slate (neutral with ocean accent) */
html[data-theme="slate"]{
  --bg:#F4F6F8; --header:#EFF2F5; --text:#0F172A; --muted:#4B5B6A; --border:#E1E7EF;
  --card-1:#FFFFFF; --card-2:#F8FAFC;
  --primary:#4F6D7A; --primary-600:#435E69; --primary-700:#394F58;
  --gw-primary:var(--primary); --gw-primary-600:var(--primary-600); --gw-primary-700:var(--primary-700);
}

/* Header links layout fix */
.gw-top-links{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}
.gw-top-links a{display:inline-block;padding:.25rem .5rem;border-radius:.5rem}

/* Header links fix (no code changes needed) */
.topbar-inner nav{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}
.topbar-inner nav a{display:inline-block;padding:.25rem .5rem;border-radius:.5rem}

/* --- Side layout hard fix --- */
.app-shell{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
.sidenav{border-right:1px solid var(--gw-border,#e5e7eb);background:var(--gw-side-bg,#f8fafc)}
.sidenav-inner{position:sticky;top:0;max-height:100vh;overflow:auto;padding:12px}
.app-main{min-width:0}

/* SideNav visuals */
.brand{font-weight:700;font-size:18px;margin:4px 0 12px}
.brand-accent{color:var(--gw-accent,#0f766e)}
.nav-col{display:flex;flex-direction:column;gap:8px}
.gw-nav{display:block;padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
.gw-nav.is-active{background:var(--gw-active,#e6f4ea);border-color:#c7e7d1}
.sidenav-foot{margin-top:16px;font-size:12px;opacity:.7}

/* Topbar link spacing (if any) */
.topbar-inner nav{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}
.topbar-inner nav a{display:inline-block;padding:.25rem .5rem;border-radius:.5rem}
